<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <title>{{ title or "Happi10 CRM" }}</title>

  <style>
	/* =========================
	   THEME TOKENS
	   ========================= */
	:root{
	  --bg:#05060a;
	  --fg:#ffffff;

	  --muted:rgba(255,255,255,.62);
	  --muted2:rgba(255,255,255,.45);

	  --panel:rgba(255,255,255,.035);
	  --panel2:rgba(255,255,255,.02);

	  --border:rgba(255,255,255,.10);
	  --border2:rgba(255,255,255,.14);

	  --shadow: 0 0 0 1px rgba(255,255,255,.03), 0 10px 28px rgba(0,0,0,.35);

	  --inputBg:rgba(0,0,0,.35);
	  --inputBorder:rgba(255,255,255,.12);

	  --btnBg:rgba(255,255,255,.08);
	  --btnHover:rgba(255,255,255,.12);
	  --btnBorder:rgba(255,255,255,.14);

	  --primaryBg:#ffffff;
	  --primaryFg:#0b0b0b;

	  --dangerBg:rgba(239,68,68,.10);
	  --dangerHover:rgba(239,68,68,.16);
	  --dangerBorder:rgba(239,68,68,.28);
	  --dangerFg:rgba(254,202,202,.95);
	}

	html[data-theme="light"]{
	  --bg:#f6f7fb;
	  --fg:#0b0c10;

	  --muted:rgba(0,0,0,.62);
	  --muted2:rgba(0,0,0,.48);

	  --panel:#ffffff;
	  --panel2:rgba(0,0,0,.02);

	  --border:rgba(15,23,42,.10);
	  --border2:rgba(15,23,42,.14);

	  --shadow: 0 0 0 1px rgba(15,23,42,.06), 0 14px 35px rgba(2,6,23,.08);

	  --inputBg:#ffffff;
	  --inputBorder:rgba(15,23,42,.14);

	  --btnBg:#ffffff;
	  --btnHover:rgba(2,6,23,.04);
	  --btnBorder:rgba(15,23,42,.14);

	  --primaryBg:#0b0c10;
	  --primaryFg:#ffffff;

	  --dangerBg:rgba(239,68,68,.10);
	  --dangerHover:rgba(239,68,68,.14);
	  --dangerBorder:rgba(239,68,68,.22);
	  --dangerFg:#b91c1c;
	}

	body{ background:var(--bg)!important; color:var(--fg)!important; }

	/* background glow */
	#bgGlow{ opacity:.75; }
	html[data-theme="light"] #bgGlow{
	  opacity:.55;
	  background:
		radial-gradient(1200px 600px at 20% -10%, rgba(2,6,23,0.06), transparent 55%),
		radial-gradient(900px 500px at 90% 0%, rgba(2,6,23,0.04), transparent 55%),
		radial-gradient(700px 500px at 50% 110%, rgba(2,6,23,0.035), transparent 55%) !important;
	}

	/* layout container */
	.shell{
	  background: transparent;
	}
	.card{
	  background: var(--panel);
	  border: 1px solid var(--border);
	  box-shadow: var(--shadow);
	  border-radius: 20px;
	}
	.card-soft{
	  background: var(--panel2);
	  border: 1px solid var(--border);
	  border-radius: 18px;
	}

	.text-muted{ color:var(--muted)!important; }
	.text-muted2{ color:var(--muted2)!important; }

	/* =========================
	   UNIVERSAL CONTROLS
	   (fix "different buttons" problem)
	   ========================= */

	/* Make ALL buttons consistent (forms use <button>) */
	button{
	  border-radius: 12px;
	  border: 1px solid var(--btnBorder);
	  background: var(--btnBg);
	  color: var(--fg);
	  transition: transform .06s ease, background .15s ease, border-color .15s ease, opacity .15s ease;
	}
	button:hover{ background: var(--btnHover); }
	button:active{ transform: translateY(1px); }

	/* Primary buttons: those that currently are bg-white text-black */
	.bg-white.text-black{
	  background: var(--primaryBg)!important;
	  color: var(--primaryFg)!important;
	  border-color: transparent!important;
	}
	.bg-white.text-black:hover{ opacity: .92; }

	/* Danger buttons: match existing red styles */
	.text-red-200,
	.text-red-300,
	.text-red-400,
	.text-red-500{
	  color: var(--dangerFg)!important;
	}
	.bg-red-500\/10{
	  background: var(--dangerBg)!important;
	}
	.border-red-500\/20{
	  border-color: var(--dangerBorder)!important;
	}
	.hover\:bg-red-500\/20:hover{
	  background: var(--dangerHover)!important;
	}

	/* Inputs/selects/textarea unified */
	input, select, textarea{
	  border-radius: 12px !important;
	  border: 1px solid var(--inputBorder) !important;
	  background: var(--inputBg) !important;
	  color: var(--fg) !important;
	  outline: none !important;
	}
	input:focus, select:focus, textarea:focus{
	  box-shadow: 0 0 0 3px rgba(99,102,241,.18) !important;
	  border-color: rgba(99,102,241,.35) !important;
	}
	html[data-theme="dark"] input::placeholder,
	html[data-theme="dark"] textarea::placeholder{ color: rgba(255,255,255,.35); }
	html[data-theme="light"] input::placeholder,
	html[data-theme="light"] textarea::placeholder{ color: rgba(0,0,0,.35); }

	/* Tables */
	table{ border-color: var(--border)!important; }
	thead{ color: var(--muted)!important; }
	tr{ border-color: var(--border)!important; }

	/* Hover row fix */
	.hover\:bg-white\/\[0\.03\]:hover{ background: var(--btnHover)!important; }

	/* Replace white borders/text in light automatically */
	html[data-theme="light"] .border-white\/5,
	html[data-theme="light"] .border-white\/10,
	html[data-theme="light"] .border-white\/15,
	html[data-theme="light"] .border-white\/20{ border-color: var(--border)!important; }

	html[data-theme="light"] .bg-white\/\[0\.02\],
	html[data-theme="light"] .bg-white\/\[0\.03\],
	html[data-theme="light"] .bg-white\/5,
	html[data-theme="light"] .bg-white\/10,
	html[data-theme="light"] .bg-white\/15{ background: var(--panel2)!important; }

	html[data-theme="light"] .bg-black\/20,
	html[data-theme="light"] .bg-black\/40{ background: var(--panel)!important; }

	html[data-theme="light"] .text-white\/90,
	html[data-theme="light"] .text-white\/80,
	html[data-theme="light"] .text-white\/70,
	html[data-theme="light"] .text-white\/60,
	html[data-theme="light"] .text-white\/55,
	html[data-theme="light"] .text-white\/50,
	html[data-theme="light"] .text-white\/45,
	html[data-theme="light"] .text-white\/40,
	html[data-theme="light"] .text-white\/35{ color: var(--muted)!important; }

	/* badges */
	.badge{
	  border: 1px solid var(--border);
	  background: var(--panel2);
	  border-radius: 999px;
	  padding: 2px 10px;
	  font-size: 11px;
	}

	/* theme toggle */
	.theme-toggle{
	  border:1px solid var(--border);
	  background: var(--btnBg);
	  color: var(--fg);
	  border-radius: 14px;
	  padding: 8px 12px;
	  display:flex;
	  align-items:center;
	  gap:10px;
	}
	.theme-toggle:hover{ background: var(--btnHover); }
  </style>
</head>

<body>
  <div id="bgGlow" class="pointer-events-none fixed inset-0"
	   style="background:
		 radial-gradient(1200px 600px at 20% -10%, rgba(255,255,255,0.12), transparent 55%),
		 radial-gradient(900px 500px at 90% 0%, rgba(255,255,255,0.08), transparent 55%),
		 radial-gradient(700px 500px at 50% 110%, rgba(255,255,255,0.06), transparent 55%);">
  </div>

  <div class="relative max-w-6xl mx-auto px-6 py-8 shell">
	<div class="flex items-center justify-between mb-8">
	  <a href="/" class="flex items-center gap-2 text-lg font-semibold tracking-tight">
		<span class="inline-flex h-7 w-7 items-center justify-center rounded-lg border"
			  style="border-color:var(--border); background:var(--panel2);">
		  <span class="font-bold">H</span>
		</span>
		Happi10 CRM
	  </a>

	  <div class="flex items-center gap-3">
		<div class="text-xs text-muted">контент · порядок · delay</div>

		<button id="themeToggle" type="button" class="theme-toggle text-sm">
		  <i id="themeIcon" class="fa-solid fa-moon"></i>
		  <span id="themeLabel">Dark</span>
		</button>
	  </div>
	</div>

	<div class="card">
	  <div class="p-6">
		{% block content %}{% endblock %}
	  </div>
	</div>
  </div>

  <script>
	(function () {
	  const root = document.documentElement;
	  const icon = document.getElementById("themeIcon");
	  const label = document.getElementById("themeLabel");

	  function apply(theme) {
		root.setAttribute("data-theme", theme);
		const isLight = theme === "light";
		if (icon) icon.className = "fa-solid " + (isLight ? "fa-sun" : "fa-moon");
		if (label) label.textContent = isLight ? "Light" : "Dark";
	  }

	  const saved = localStorage.getItem("crm_theme");
	  apply(saved || "dark");

	  document.getElementById("themeToggle")?.addEventListener("click", () => {
		const next = (root.getAttribute("data-theme") === "light") ? "dark" : "light";
		localStorage.setItem("crm_theme", next);
		apply(next);
	  });
	})();
  </script>
</body>
</html>